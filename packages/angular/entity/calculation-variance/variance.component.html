<div class="text-lg font-medium mb-4"> {{ 'Ngm.Calculation.VARIANCE_MEASURE' | translate: {Default: "Variance Measure"} }} </div>

<form [formGroup]="formGroup" class="flex flex-col justify-start items-stretch">

    <div class="flex justify-between items-center gap-4">
        <ngm-property-select class="flex-1 w-5/12" displayDensity="compact"
            [label]=" 'Ngm.Calculation.Measure' | translate: {Default: 'Measure'} "
            [dsCoreService]="dsCoreService"
            [dataSettings]="dataSettings"
            [entityType]="entityType"
            [capacities]="[PropertyCapacity.Measure]"
            [editable]="false"
            formControlName="measure"
        >
        </ngm-property-select>

        <ngm-property-select class="flex-1 w-5/12" displayDensity="compact"
            [label]=" 'Ngm.Calculation.BaseDimension' | translate: {Default: 'Base Dimension'} "
            [dsCoreService]="dsCoreService"
            [dataSettings]="dataSettings"
            [entityType]="entityType"
            [capacities]="[PropertyCapacity.Dimension]"
            [editable]="false"
            formControlName="baseDimension"
        >
        </ngm-property-select>
    </div>

    <div class="text-base my-2">{{expression}}</div>

    <ngm-compare-member-select label="{{ 'Ngm.Calculation.Compare' | translate: {Default: 'Compare'} }} (A)"
        [dataSettings]="dataSettings"
        [entityType]="entityType"
        [dimension]="baseDimension"
        formControlName="compareA"
    />

    <ngm-compare-member-select label="{{ 'Ngm.Calculation.To' | translate: {Default: 'To'} }} (B)"
        [dataSettings]="dataSettings"
        [entityType]="entityType"
        [dimension]="baseDimension"
        formControlName="toB"
    />

    <mat-checkbox formControlName="asZero" class="my-2">
        {{ 'Ngm.Calculation.SetNoDataasZero' | translate: {Default: "Set No Data as Zero"} }}
    </mat-checkbox>

    <mat-checkbox formControlName="asPercentage" class="my-2">
        {{ 'Ngm.Calculation.CalculateasPercentage' | translate: {Default: "Calculate as Percentage"} }}
    </mat-checkbox>

    <mat-checkbox formControlName="directDivide" class="my-2">
        {{ 'Ngm.Calculation.DirectDivide' | translate: {Default: "Direct Divide"} }}
    </mat-checkbox>

    <div *ngIf="asPercentage && !directDivide" class="flex justify-between items-center">
        <mat-checkbox formControlName="absBaseValue">
            {{ 'Ngm.Calculation.AbsoluteBaseValue' | translate: {Default: "Absolute Base Value"} }}
        </mat-checkbox>
        <mat-form-field appearance="fill" class="w-5/12">
            <mat-label>{{ 'Ngm.Calculation.DivideBy' | translate: {Default: "Divide By"} }}</mat-label>
            <mat-select formControlName="divideBy">
              <mat-option value="A">
                {{ 'Ngm.Calculation.CompareValueA' | translate: {Default: "Compare Value (A)"} }}
              </mat-option>
              <mat-option value="B">{{ 'Ngm.Calculation.ToValueB' | translate: {Default: "To Value (B)"} }}
              </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

</form>
