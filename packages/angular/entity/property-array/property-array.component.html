<div class="ngm-property-array__container flex flex-col justify-start items-stretch"
  cdkDropList
  (cdkDropListDropped)="drop($event)"
>

  @if (isEmpty) {
    <button mat-button color="primary" ngmAppearance="dashed" (click)="add()">
      <mat-icon fontSet="material-icons-round">playlist_add</mat-icon>
      {{ 'Ngm.Property.ADD_DIMENSION' | translate: {Default: 'Add Dimension'} }}
    </button>
  }

  @for (item of formArray.controls; track i; let i = $index;) {
    <ngm-property-select class="group" cdkDragBoundary=".ngm-property-array__container" cdkDrag
      [formControl]="$any(item)"
      [dataSettings]="dataSettings"
      [entityType]="entityType"
      [dsCoreService]="dsCoreService"
      [capacities]="capacities"
    >
      <mat-icon ngmPrefix cdkDragHandle>drag_indicator</mat-icon>

      <button ngmSuffix mat-icon-button color="warn" class="opacity-0 group-hover:opacity-100" displayDensity="compact"
        (click)="remove(i); $event.stopPropagation(); $event.preventDefault()">
        <mat-icon>clear</mat-icon>
      </button>

    </ngm-property-select>
  }
</div>

@if (!isEmpty) {
  <button class="add" mat-button color="primary" ngmAppearance="dashed" (click)="add()">
    <mat-icon fontSet="material-icons-round">playlist_add</mat-icon>
    {{ 'Ngm.Property.ADD_DIMENSION' | translate: {Default: 'Add Dimension'} }}
  </button>
}