<label class="p-1 text-sm text-ellipsis whitespace-nowrap overflow-hidden disabled:opacity-50">
  {{ 'Ngm.TimeFilter.Today' | translate: {Default: "Today"} }}
</label>

<ng-container [ngSwitch]="granularity">
  <ng-container *ngSwitchCase="TimeGranularity.Year">
    <ngm-yearpicker [formControl]="date">
      <button ngmSuffix mat-icon-button class="ngm-actionable-opacity"
        [matMenuTriggerFor]="granularityMenu"
        (click)="$event.stopPropagation();$event.preventDefault();">
        <mat-icon>more_vert</mat-icon>
      </button>
    </ngm-yearpicker>
  </ng-container>
  <ng-container *ngSwitchCase="TimeGranularity.Quarter">
    <ngm-quarterpicker [formControl]="date">
      <button ngmSuffix mat-icon-button class="ngm-actionable-opacity"
        [matMenuTriggerFor]="granularityMenu"
        (click)="$event.stopPropagation();$event.preventDefault();">
          <mat-icon>more_vert</mat-icon>
      </button>
    </ngm-quarterpicker>
  </ng-container>
  <ng-container *ngSwitchCase="TimeGranularity.Month">
    <ngm-monthpicker [formControl]="date">
      <button ngmSuffix mat-icon-button class="ngm-actionable-opacity"
        [matMenuTriggerFor]="granularityMenu"
        (click)="$event.stopPropagation();$event.preventDefault();">
        <mat-icon>more_vert</mat-icon>
      </button>
    </ngm-monthpicker>
  </ng-container>

  <ng-container *ngSwitchDefault>
    <ngm-datepicker [formControl]="date">
      <button ngmSuffix mat-icon-button class="ngm-actionable-opacity"
        [matMenuTriggerFor]="granularityMenu"
        (click)="$event.stopPropagation();$event.preventDefault();">
          <mat-icon>more_vert</mat-icon>
      </button>
    </ngm-datepicker>
  </ng-container>
</ng-container>

<mat-radio-group [(ngModel)]="granularity">
  <mat-menu #granularityMenu="matMenu" class="ngm-formly ngm-density__compact">
    <button mat-menu-item disableRipple *ngFor="let value of TIME_GRANULARITY_SEQUENCES[granularitySequence]"
      (click)="$event.stopPropagation();">
      <mat-radio-button [value]="value">
        {{ 'Ngm.TimeFilter.' + value | translate: {Default: value} }}
      </mat-radio-button>
    </button>
  </mat-menu>
</mat-radio-group>
