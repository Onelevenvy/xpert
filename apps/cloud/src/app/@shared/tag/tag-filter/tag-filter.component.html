<div class="flex items-center gap-1 px-2 h-8 rounded-lg border-[0.5px] border-transparent bg-gray-200 cursor-pointer hover:bg-gray-300"
 [cdkMenuTriggerFor]="tagsMenu"
>
  <div class="p-[1px]">
    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5 text-gray-700" data-icon="Tag01" aria-hidden="true">
      <g id="Icon" clip-path="url(#clip0_17795_9693)">
        <path id="Icon_2" d="M4.66699 4.6665H4.67283M1.16699 3.03317L1.16699 5.6433C1.16699 5.92866 1.16699 6.07134 1.19923 6.20561C1.22781 6.32465 1.27495 6.43845 1.33891 6.54284C1.41106 6.66057 1.51195 6.76146 1.71373 6.96324L6.18709 11.4366C6.88012 12.1296 7.22664 12.4761 7.62621 12.606C7.97769 12.7202 8.35629 12.7202 8.70777 12.606C9.10735 12.4761 9.45386 12.1296 10.1469 11.4366L11.4371 10.1464C12.1301 9.45337 12.4766 9.10686 12.6065 8.70728C12.7207 8.35581 12.7207 7.9772 12.6065 7.62572C12.4766 7.22615 12.1301 6.87963 11.4371 6.1866L6.96372 1.71324C6.76195 1.51146 6.66106 1.41057 6.54332 1.33842C6.43894 1.27446 6.32514 1.22732 6.20609 1.19874C6.07183 1.1665 5.92915 1.1665 5.64379 1.1665L3.03366 1.1665C2.38026 1.1665 2.05357 1.1665 1.804 1.29366C1.58448 1.40552 1.406 1.58399 1.29415 1.80352C1.16699 2.05308 1.16699 2.37978 1.16699 3.03317ZM4.95866 4.6665C4.95866 4.82759 4.82808 4.95817 4.66699 4.95817C4.50591 4.95817 4.37533 4.82759 4.37533 4.6665C4.37533 4.50542 4.50591 4.37484 4.66699 4.37484C4.82808 4.37484 4.95866 4.50542 4.95866 4.6665Z" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round"></path>
      </g>
      <defs><clipPath id="clip0_17795_9693"><rect width="14" height="14" fill="white"></rect></clipPath></defs>
    </svg>
  </div>
  
  <div class="text-[13px] leading-[18px] text-gray-700">All Tags</div>
  <div class="p-[1px]">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="remixicon h-3.5 w-3.5 text-gray-700">
      <path d="M11.9999 13.1714L16.9497 8.22168L18.3639 9.63589L11.9999 15.9999L5.63599 9.63589L7.0502 8.22168L11.9999 13.1714Z"></path>
    </svg>
  </div>
</div>

<ng-template #tagsMenu>
  <div cdkMenu class="p-2 w-full">
    <ul cdkListbox [(ngModel)]="tags" [cdkListboxCompareWith]="compareWith" cdkListboxMultiple
      (ngModelChange)="onTagChange()"
    >
      @for (tag of allTags(); track tag.id) {
        <div #option="cdkOption" [cdkOption]="tag" class="flex items-center px-2 py-1 cursor-pointer rounded-lg hover:bg-hover-bg">
          <div class="flex-1 w-24">{{tag.name | i18n}}</div>
        @if (option.isSelected()) {
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"
             class="shrink-0 w-4 h-4 text-primary-600" data-icon="Check" aria-hidden="true">
             <g id="check"><path id="Icon" d="M13.3334 4L6.00008 11.3333L2.66675 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </g>
          </svg>
        }
        </div>
      }
    </ul>
  </div>
</ng-template>