<div class="flex justify-between items-center h-8">
  <div class="flex items-center space-x-1 shrink-0">
    <div class="flex items-center justify-center w-6 h-6">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-primary-500" data-icon="BracketsX" aria-hidden="true">
        <path d="M18.5708 20C19.8328 20 20.8568 18.977 20.8568 17.714V13.143L21.9998 12L20.8568 10.857V6.286C20.8568 5.023 19.8338 4 18.5708 4M5.429 4C4.166 4 3.143 5.023 3.143 6.286V10.857L2 12L3.143 13.143V17.714C3.143 18.977 4.166 20 5.429 20M15 9L9 15M9 9L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
      </svg>
    </div>
    <div class="p-[1px] w-4 h-4 shrink-0 flex justify-center items-center text-text-secondary"
      [matTooltip]="'PAC.Xpert.OutputVariablesInfo' | translate: {
        Default: 'Organize data in a predefined format to facilitate automatic parsing and use by the program.'
      }"
      matTooltipPosition="above">
      <i class="ri-question-line"></i>
    </div>
  </div>
  
  <div class="flex gap-2 items-center">
    <div class="flex items-center rounded-md h-7 px-3 space-x-1 cursor-pointer select-none text-text-secondary hover:bg-state-base-hover"
      [cdkMenuTriggerFor]="parameterTypeMenu">
      <i class="ri-add-line"></i>
      <div class="text-sm font-medium">{{ 'PAC.ACTIONS.Add' | translate: {Default: 'Add'} }}</div>
    </div>
  </div>
</div>

<div class="flex flex-col gap-1 mt-1">
  @for (param of parameters(); track i; let i = $index) {
    <div class="w-full flex justify-start items-start">
      <xpert-parameter-input class="grow pl-2 group/item"
        [ngModel]="param"
        (ngModelChange)="setParameter(i, $event)"
        (removed)="deleteParameter(i)"
      />
    </div>
  }
</div>

<ng-template #parameterTypeMenu >
  <div #menu="cdkMenu" cdkMenu class="ngm-cdk-menu p-2">
    <xpert-parameter-menu-item class="flex items-center px-2 h-8 rounded-lg hover:bg-gray-50 cursor-pointer"
      cdkMenuItem
      [type]="eXpertParameterTypeEnum.TEXT"
      (click)="addParameter({type: eXpertParameterTypeEnum.TEXT, optional: true})"
    />
    <xpert-parameter-menu-item class="flex items-center px-2 h-8 rounded-lg hover:bg-gray-50 cursor-pointer"
      cdkMenuItem
      [type]="eXpertParameterTypeEnum.NUMBER"
      (click)="addParameter({type: eXpertParameterTypeEnum.NUMBER, optional: true})"
    />
    <xpert-parameter-menu-item class="flex items-center px-2 h-8 rounded-lg hover:bg-gray-50 cursor-pointer"
      cdkMenuItem
      [type]="eXpertParameterTypeEnum.OBJECT"
      (click)="addParameter({type: eXpertParameterTypeEnum.OBJECT, optional: true})"
    />
    <xpert-parameter-menu-item class="flex items-center px-2 h-8 rounded-lg hover:bg-gray-50 cursor-pointer"
      cdkMenuItem
      [type]="eXpertParameterTypeEnum.SELECT"
      (click)="addParameter({type: eXpertParameterTypeEnum.SELECT, optional: true})"
    />
    <xpert-parameter-menu-item class="flex items-center px-2 h-8 rounded-lg hover:bg-gray-50 cursor-pointer"
      cdkMenuItem
      [type]="eXpertParameterTypeEnum.ARRAY_STRING"
      (click)="addParameter({type: eXpertParameterTypeEnum.ARRAY_STRING, optional: true})"
    />
    <xpert-parameter-menu-item class="flex items-center px-2 h-8 rounded-lg hover:bg-gray-50 cursor-pointer"
      cdkMenuItem
      [type]="eXpertParameterTypeEnum.ARRAY"
      (click)="addParameter({type: eXpertParameterTypeEnum.ARRAY, optional: true})"
    />
  </div>
</ng-template>

<!-- 
<ng-template #paramConfigMenu let-index="index" let-control="control" let-trigger="trigger">
  <div class="parameter-config-menu p-4 rounded-xl border-[0.5px] border-solid border-divider-deep shadow-lg bg-components-card-bg overflow-auto">
    <div class="w-full flex justify-between items-center">
      <h3 class="text-xl font-semibold leading-6">{{ 'PAC.Xpert.EditParameter' | translate: {Default: 'Edit parameter'} }}</h3>
      <button type="button" class="btn rounded-xl justify-center w-8 h-8"
        (click)="trigger.close()">
        <i class="ri-close-line"></i>
      </button>
    </div>

    <xpert-parameter-form [ngModel]="control.value"
      (ngModelChange)="setParameter(index, $event)"
      [ngModelOptions]="{standalone: true}" />
  </div>
</ng-template> -->