<form [formGroup]="form" class="w-full h-full flex flex-col justify-start items-stretch">
	<div class="flex justify-between items-center px-4">
		<h2 class="text-lg">
			{{ 'PAC.MENU.ForOrganization' | translate: {Default: "For Organization"} }}:
			{{ organization?.name }}
		</h2>

		<div class="flex items-center">
			<pac-language-selector appearance="fill" displayDensity="compact"
				formControlName="languageCode"
				(ngModelChange)="subject$.next(true)"
				>
			</pac-language-selector>
			<!-- <ngm-select formControlName="languageCode" (ngModelChange)="subject$.next(true)"></ngm-select> -->

			<mat-form-field appearance="fill" displayDensity="compact" class="ml-2">
				<mat-label>
					{{ 'PAC.KEY_WORDS.TemplateName' | translate: {Default: "Template Name"} }}
				</mat-label>
				<mat-select formControlName="name" (ngModelChange)="subject$.next(true)">
				<mat-option *ngFor="let name of templateNames" [value]="name">
					{{name}}
				</mat-option>
				</mat-select>
			</mat-form-field>

			<div ngmButtonGroup class="ml-2" displayDensity="cosy">
				<button mat-raised-button color="primary" displayDensity="cosy" [disabled]="form.invalid || form.pristine"
					(click)="submitForm()">
					<div class="flex items-center">
						<mat-icon fontSet="material-icons-outlined">save</mat-icon>
						{{ 'PAC.ACTIONS.Save' | translate: {Default: "Save"} }}
					</div>
				</button>
			</div>
		</div>

	</div>
	
	<div class="pac-page__body flex-1 grid grid-cols-2 gap-4">
		<div class="rounded overflow-hidden flex flex-col justify-start items-stretch p-2">
			<div class="basis-28 flex flex-col justify-start items-stretch">
				<h3>{{ 'PAC.KEY_WORDS.Subject' | translate: {Default: "Subject"} }}</h3>
				<ngx-monaco-editor fxFlex
					[options]="{
						theme: 'vs',
						automaticLayout: true,
						language: 'sql'
					}"
					formControlName="subject"
				></ngx-monaco-editor>
			</div>

			<div class="flex-1 flex flex-col justify-start items-stretch">
				<h3>{{ 'PAC.KEY_WORDS.EmailBody' | translate: {Default: "Email Body"} }}</h3>
				<ngx-monaco-editor class="flex-1"
					[options]="{
						theme: 'vs',
						automaticLayout: true,
						language: 'html'
					}"
					formControlName="mjml"
				></ngx-monaco-editor>
			</div>
		</div>

		<div class="rounded overflow-hidden flex flex-col justify-start items-stretch p-4">
			<div class="basis-14 flex justify-start items-stretch">
				<span>{{ 'PAC.KEY_WORDS.Subject' | translate: {Default: "Subject"} }}:</span>
				<div id="previewSubject" class="flex-1"
					[innerHtml]="previewSubject"
				></div>
			</div>

			<div class="flex-1 flex flex-col justify-start items-stretch overflow-auto">
				<h3>{{ 'PAC.KEY_WORDS.EmailBody' | translate: {Default: "Email Body"} }}</h3>
				<div class="flex-1 overflow-auto">
					<div id="previewEmail" [innerHtml]="previewEmail"></div>
				</div>
			</div>
		</div>

	</div>
	
</form>
