<header class="p-8 text-2xl cursor-move" cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>
  <h4 >
    {{ 'PAC.MODEL.MODEL.Preferences' | translate: {Default: "Preferences"} }}
  </h4>
</header>

<div class="mat-typography relative p-4">
  <formly-form [form]="form" [fields]="fields" [model]="model"
    (modelChange)="onFormChange(model)"/>
  @if (model.preferences?.exposeXmla) {
    <div class="w-full overflow-auto mt-2">
      <a [href]="xmlaUrl">{{xmlaUrl}}</a>
    </div>
  }

  @if (loading()) {
    <ngm-spin class="absolute top-0 left-0 w-full h-full" />
  }
</div>

<div class="flex justify-between items-center p-4">
  <button mat-button (click)="close()">
    {{ 'PAC.KEY_WORDS.Cancel' | translate: {Default: "Cancel"} }}
  </button>

  <div ngmButtonGroup>
    <button mat-stroked-button (click)="reset()">
      {{ 'PAC.KEY_WORDS.Reset' | translate: {Default: "Reset"} }}
    </button>
    <button mat-raised-button color="accent" cdkFocusInitial (click)="saveModel()">
      {{ 'PAC.KEY_WORDS.Apply' | translate: {Default: "Apply"} }}
    </button>
  </div>
</div>
