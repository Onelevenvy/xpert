<ng-template>
  <div #menu="cdkMenu" cdkMenu class="ngm-cdk-menu">
    <div cdkMenuItem class="ngm-cdk-menu-item" (click)="createAgent(menu)">
      <span>{{ 'PAC.Xpert.NewAgent' | translate: {Default: 'New Agent'} }}</span>
    </div>
    <div cdkMenuItem class="ngm-cdk-menu-item" [cdkMenuTriggerFor]="teamsMenu">
      <span>{{ 'PAC.Xpert.AddExternalExpert' | translate: {Default: 'Add External Expert'} }}</span>
    </div>
    <div cdkMenuItem class="ngm-cdk-menu-item" [cdkMenuTriggerFor]="knowledgeMenu">
      <span>{{ 'PAC.Xpert.AddKnowledgebase' | translate: {Default: 'Add Knowledgebase'} }}</span>
    </div>
    <div cdkMenuItem class="ngm-cdk-menu-item" [cdkMenuTriggerFor]="toolsetMenu">
      <span>{{ 'PAC.Xpert.AddToolset' | translate: {Default: 'Add Toolset'} }}</span>
    </div>
    <div cdkMenuItem class="ngm-cdk-menu-item danger" (click)="deleteNode(menu, node)">
      <span>{{ 'PAC.Xpert.Remove' | translate: {Default: 'Remove'} }}</span>
    </div>
  </div>
</ng-template>

<ng-template #knowledgeMenu>
  <div cdkMenu class="ngm-cdk-menu flex flex-col">
    <xpert-studio-knowledge-menu class="overflow-auto" />
  </div>
</ng-template>

<ng-template #toolsetMenu>
  <div cdkMenu class="ngm-cdk-menu flex flex-col">
    <xpert-studio-toolset-menu class="overflow-auto" />
  </div>
</ng-template>

<ng-template #teamsMenu>
  <div cdkMenu class="ngm-cdk-menu flex flex-col">
    @for (xpert of collaborators$ | async; track xpert.id) {
      <xpert-inline-profile cdkMenuItem class="ngm-cdk-menu-item py-1 overflow-hidden"
        [xpert]="xpert"
        (click)="addCollaborator(xpert)"
      />
    }
  </div>
</ng-template>
