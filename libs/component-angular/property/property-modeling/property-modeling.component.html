<mat-accordion class="nx-accordion" displayMode="flat" togglePosition="before" [multi]="true" cdkDropListGroup>
  <mat-expansion-panel class="mat-elevation-z" [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Rows
      </mat-panel-title>
      <mat-panel-description fxLayout="row" fxLayoutAlign="end center">
        <button mat-icon-button
          (click)="$event.stopPropagation();$event.preventDefault();add(rows)">
          <mat-icon>add</mat-icon>
        </button>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div id="property-modeling-rows" [ngClass]="{'nx-property-modeling__empty': !rows.length}"
      cdkDropList
      [cdkDropListData]="rows" 
      [cdkDropListConnectedTo]="['list-dimensions']"
      (cdkDropListDropped)="drop($event)"
    >
      <nx-property-select *ngFor="let item of rows; let index = index" cdkDrag
        [dataSettings]="dataSettings"
        [entityType]="entityType"
        [ngModel]="item"
        (ngModelChange)="onPropertyChange(item, $event)"
      >
        <mat-icon matPrefix cdkDragHandle>drag_indicator</mat-icon>
        <button class="nx-formly__remove" mat-icon-button color="warn"
          (click)="$event.stopPropagation();$event.preventDefault();remove(rows, index)">
          <mat-icon>clear</mat-icon>
        </button>
      </nx-property-select>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel class="mat-elevation-z" [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Columns
      </mat-panel-title>
      <mat-panel-description fxLayout="row" fxLayoutAlign="end center">
        <button mat-icon-button
          (click)="$event.stopPropagation();$event.preventDefault();add(columns)">
          <mat-icon>add</mat-icon>
        </button>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div cdkDropList [cdkDropListData]="columns" (cdkDropListDropped)="drop($event)"
      [ngClass]="{'nx-property-modeling__empty': !columns.length}"
    >
      <nx-property-select *ngFor="let item of columns; let index = index" cdkDrag
        [dataSettings]="dataSettings"
        [entityType]="entityType"
        [ngModel]="item"
        (ngModelChange)="onPropertyChange(item, $event)"
      >
        <mat-icon matPrefix cdkDragHandle>drag_indicator</mat-icon>
        <button class="nx-formly__remove" mat-icon-button color="warn"
          (click)="$event.stopPropagation();$event.preventDefault();remove(columns, index)">
          <mat-icon>clear</mat-icon>
        </button>
      </nx-property-select>
    </div>
  </mat-expansion-panel>

  <mat-expansion-panel class="mat-elevation-z" [expanded]="true">
    <mat-expansion-panel-header>
      <mat-panel-title>
        Filters
      </mat-panel-title>
      <mat-panel-description fxLayout="row" fxLayoutAlign="end center">
        <button mat-icon-button
          (click)="$event.stopPropagation();$event.preventDefault();add(filters)">
          <mat-icon>add</mat-icon>
        </button>
      </mat-panel-description>
    </mat-expansion-panel-header>

<!-- 
    <div cdkDropList [cdkDropListData]="filters" (cdkDropListDropped)="drop($event)"
      [ngClass]="{'nx-property-modeling__empty': !filters.length}"
    >
      <nx-property-select *ngFor="let item of filters; let index = index" cdkDrag
        [dataSettings]="dataSettings"
        [entityType]="entityType"
        [ngModel]="item"
        (ngModelChange)="onPropertyChange(item, $event)"
      >
        <button class="nx-formly__remove" mat-icon-button color="warn"
          (click)="$event.stopPropagation();$event.preventDefault();remove(filters, index)">
          <mat-icon>clear</mat-icon>
        </button>
      </nx-property-select>
    </div> -->

  </mat-expansion-panel>
</mat-accordion>
